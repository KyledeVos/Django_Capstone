<!-- Extend page_base allowing for User Login and SignUp options to be accessible-->
{% extends "page_base.html" %}
{% load static %}

{% block content %}

<!-- Display Products loaded in system or 'maintenance' message if none are loaded-->
{% if products %}
    
    {% for category in products %}
        <!--Display Each Product Category - Already Validated to only display Categories
            with at least one products
        -->
        <div class = "row my-2 text-center border border-primary ">
            <h1>{{category.0}}</h1>
        </div>
        
        <section class = "row border border-secondary my-2 g-1">
            {% for product in category.1 %}
                <div class = "col-xxl-3 col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12 
                            p-0 border border-primary">
                    <!--Display Multiple Sizes Notification for Product with Pricing Options-->
                    {% if product.multiple_sizes is True%}
                        <h6 class = "card-header border-0 text-center fw-bold bg-transparent"
                            style="color: rgb(141, 26, 176);">
                            Multiple Sizes</h6>
                    {% else %}
                    <!--Spacer-->
                        <h6 class = "card-header border-0 text-center bg-transparent">&nbsp</h6>
                    {% endif %}
                    
                    <!-- Product Title-->
                    <h5 class = "card-header border-0 text-center text-truncate bg-transparent">
                        {{product.title}}
                    </h5>

                    <!-- Product Main Image x`-->
                    <div class = "text-center">
                        <a href="{% url 'product_site:product_view' product.id 'none' %}">
                            <img class = "my-2 card-img-top rounded product_image"
                                src="{{product.main_image.url}}">
                        </a>
                    </div>

                    <!--Product Price-->
                    <h5 class = "card-header border-0 text-center bg-transparent">
                        R{{product.display_price}}
                    </h5>

                    <!-- View Product Button-->
                    <form class="text-center d-grid mx-5"
                            action="{% url 'product_site:product_view' product.id 'none' %}">
                        <button type="submit" class="btn btn-outline-dark " >
                            View
                        </button>
                    </form>
                </div>
            {% endfor %}
        </section>
    {% endfor %}

{% else %}
    <h2>Site under maintenance - Products will be back soon!</h2>
{% endif %}





{% endblock %}